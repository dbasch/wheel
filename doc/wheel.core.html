<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>wheel.core documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Wheel 0.1.0-SNAPSHOT API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><a href="index.html"><span>Namespaces</span></a></h3><ul><li class="current"><a href="wheel.core.html"><span>wheel.core</span></a></li><li><a href="wheel.sql.html"><span>wheel.sql</span></a></li></ul></div><div class="sidebar" id="vars"><h3><a href="#top"><span>Public Vars</span></a></h3><ul><li><a href="wheel.core.html#var-add-user"><span>add-user</span></a></li><li><a href="wheel.core.html#var-change-password"><span>change-password</span></a></li><li><a href="wheel.core.html#var-check"><span>check</span></a></li><li><a href="wheel.core.html#var-creds"><span>creds</span></a></li><li><a href="wheel.core.html#var-min-password-length"><span>min-password-length</span></a></li><li><a href="wheel.core.html#var-set-password"><span>set-password</span></a></li></ul></div><div class="namespace-docs" id="content"><h2 class="anchor" id="top">wheel.core documentation</h2><pre class="doc"></pre><div class="public anchor" id="var-add-user"><h3>add-user</h3><div class="usage"><code>(add-user id password store-fn &amp; [user-map])</code></div><pre class="doc">Creates new user entry.
store-fn must know how to store an arbitrary map with :id as the key
(e.g. put it in a sql database). The default map will contain the keys generated by the
creds function. Optionally you can add other user attributes such as :email, :created_at, etc.</pre></div><div class="public anchor" id="var-change-password"><h3>change-password</h3><div class="usage"><code>(change-password id old-pass new-pass lookup-fn update-fn)</code></div><pre class="doc">If the old password validates, set the new password for the user.
</pre></div><div class="public anchor" id="var-check"><h3>check</h3><div class="usage"><code>(check id password lookup-fn)</code></div><pre class="doc">Validates a user password. lookup-fn must be consistent with store-fn.
</pre></div><div class="public anchor" id="var-creds"><h3>creds</h3><div class="usage"><code>(creds id password)</code></div><pre class="doc">Derives a secure hash for storage using a key derivation function,
returns a map of the form:
{:id id
 :key &quot;long string of gibberish generated by the derivation function&quot;}</pre></div><div class="public anchor" id="var-min-password-length"><h3>min-password-length</h3><div class="usage"></div><pre class="doc"></pre></div><div class="public anchor" id="var-set-password"><h3>set-password</h3><div class="usage"><code>(set-password id password update-fn)</code></div><pre class="doc">Clobbers the existing password for a user.
update-fn must be function that takes a creds map
and knows how to update the password store.</pre></div></div></body></html>